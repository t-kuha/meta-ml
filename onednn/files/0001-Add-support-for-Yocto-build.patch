From 489ee53f751fd1e7cfc0d1b966c7b9287f4919c6 Mon Sep 17 00:00:00 2001
From: t-kuha <imagingtechnerd@gmail.com>
Date: Sat, 7 Oct 2023 19:48:31 +0900
Subject: [PATCH] Add support for Yocto build

---
 cmake/ACL.cmake     |  2 +-
 cmake/FindACL.cmake | 18 ++++++++++--------
 2 files changed, 11 insertions(+), 9 deletions(-)

diff --git a/cmake/ACL.cmake b/cmake/ACL.cmake
index 2aab7690b..80e2e67ca 100644
--- a/cmake/ACL.cmake
+++ b/cmake/ACL.cmake
@@ -34,7 +34,7 @@ find_package(ACL REQUIRED)
 set(ACL_MINIMUM_VERSION "23.02.1")
 
 if(ACL_FOUND)
-    file(GLOB_RECURSE ACL_VERSION_FILE $ENV{ACL_ROOT_DIR}/*/arm_compute_version.embed)
+    file(GLOB_RECURSE ACL_VERSION_FILE ${ACL_ROOT_DIR}/*/arm_compute_version.embed)
     if ("${ACL_VERSION_FILE}" STREQUAL "")
         message(WARNING "Build may fail: Could not determine ACL version (minimum required is ${ACL_MINIMUM_VERSION})")
     else()
diff --git a/cmake/FindACL.cmake b/cmake/FindACL.cmake
index 674cdb968..99aaf165c 100644
--- a/cmake/FindACL.cmake
+++ b/cmake/FindACL.cmake
@@ -21,16 +21,18 @@
 #
 
 # Use ACL_ROOT_DIR environment variable to find the library and headers
+message(${ACL_ROOT_DIR})
 find_path(ACL_INCLUDE_DIR
   NAMES arm_compute/graph.h
-  PATHS ENV ACL_ROOT_DIR
+  PATHS ${ACL_ROOT_DIR}
+  PATH_SUFFIXES include()
   NO_DEFAULT_PATH
   )
 
 find_library(ACL_LIBRARY
   NAMES arm_compute
-  PATHS ENV ACL_ROOT_DIR
-  PATH_SUFFIXES build
+  PATHS ${ACL_ROOT_DIR}
+  PATH_SUFFIXES lib
   NO_DEFAULT_PATH
   )
 
@@ -49,20 +51,20 @@ mark_as_advanced(
 if(ACL_FOUND)
   find_path(ACL_EXTRA_INCLUDE_DIR
     NAMES half/half.hpp
-    PATHS ENV ACL_ROOT_DIR
+    PATHS ${ACL_ROOT_DIR}
     PATH_SUFFIXES include
     )
 
   find_library(ACL_GRAPH_LIBRARY
     NAMES arm_compute_graph
-    PATHS ENV ACL_ROOT_DIR
-    PATH_SUFFIXES build
+    PATHS ${ACL_ROOT_DIR}
+    PATH_SUFFIXES lib
     )
 
   find_library(ACL_CORE_LIBRARY
     NAMES arm_compute_core
-    PATHS ENV ACL_ROOT_DIR
-    PATH_SUFFIXES build
+    PATHS ${ACL_ROOT_DIR}
+    PATH_SUFFIXES lib
     )
 
   list(APPEND ACL_INCLUDE_DIRS
-- 
2.34.1

